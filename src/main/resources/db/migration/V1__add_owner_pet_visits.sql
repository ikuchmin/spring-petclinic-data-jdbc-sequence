CREATE TABLE owner (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   last_name VARCHAR,
   first_name VARCHAR,
   CONSTRAINT pk_owner PRIMARY KEY (id)
);

CREATE TABLE owner_pet_ref (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   pet_id BIGINT,
   owner BIGINT,
   CONSTRAINT pk_owner_pet_ref PRIMARY KEY (id)
);

CREATE TABLE pet (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   nickname VARCHAR,
   CONSTRAINT pk_pet PRIMARY KEY (id)
);

CREATE TABLE visit (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   CONSTRAINT pk_visit PRIMARY KEY (id)
);

ALTER TABLE owner_pet_ref ADD CONSTRAINT FK_OWNER_PET_REF_ON_OWNER FOREIGN KEY (owner) REFERENCES owner (id);

CREATE INDEX IDX_OWNER_PET_REF_ON_OWNER ON owner_pet_ref(owner);

ALTER TABLE owner_pet_ref ADD CONSTRAINT FK_OWNER_PET_REF_ON_PET FOREIGN KEY (pet_id) REFERENCES pet (id);

CREATE INDEX IDX_OWNER_PET_REF_ON_PET ON owner_pet_ref(pet_id);